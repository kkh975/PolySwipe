/*!*
 * @autor: Blim - Koo Chi Hoon(kkh975@naver.com)
 * @license http://blim.mit-license.org/
 */function SwipePoly(t){"use strict";function e(){var e=null,o=0;if(x=W.extend(D,t),_=W.isArray(x.wrap)?x.wrap:W.dom2Array(x.wrap),b=W.isArray(x.list)?x.list:W.dom2Array(x.list),!b||!_)return!1;if(I=b.length,_=_[0],E=_.parentNode,z=W.getCssPrefix(),x.touchMinumRange=Math.max(1,Math.min(100,x.touchMinumRange)),2>I)return!1;if(!(W.hasCss3Transition()&&"addEventListener"in window))return!1;for(x.slideShowTime&&("boolean"==typeof x.slideShowTime&&(N=x.slideShowTime,N&&(x.slideShowTime=D.slideShowTime)),"string"==typeof x.slideShowTime&&(x.slideShowTime=parseInt(x.slideShowTime,10)),isNaN(x.slideShowTime)?N=!1:(N=!0,2*x.duration>=x.slideShowTime&&(x.slideShowTime=2*x.duration))),x.toStart&&(M=W.isArray(x.toStart)?x.toStart:W.dom2Array(x.toStart),W.setBtnEvent(M,x.startEvents,s)),x.toStop&&(T=W.isArray(x.toStop)?x.toStop:W.dom2Array(x.toStop),W.setBtnEvent(T,x.stopEvents,r)),x.toPrev&&(A=W.isArray(x.toPrev)?x.toPrev:W.dom2Array(x.toPrev),W.setBtnEvent(A,x.moveEvents,d)),x.toNext&&(L=W.isArray(x.toNext)?x.toNext:W.dom2Array(x.toNext),W.setBtnEvent(L,x.moveEvents,v)),x.pages&&(P=W.isArray(x.pages)?x.pages:W.dom2Array(x.pages),W.setBtnEvent(P,x.moveEvents,function(t){p(t)})),2===I&&x.loop&&(e=b[0].cloneNode(!0),b.push(e),_.appendChild(e),e=b[1].cloneNode(!0),b.push(e),_.appendChild(e),$=!0,I=4),o=b.length,window.addEventListener("load",n,!1),E.addEventListener("touchstart",V.setStart),E.addEventListener("touchmove",V.setMove),E.addEventListener("touchend",V.setEnd),E.addEventListener("touchcancel",V.setEnd),_.addEventListener(z.transitionsendJs,w,!1);--o>-1;)b[o].addEventListener("focus",r,!1),b[o].addEventListener("blur",s,!1);return!0}function n(){var t="",e=0,n=0;J=E.offsetWidth,j=360/I,R=-j/2,B=-R;var o=J,r=o/2,i=(180-j)/2,u=Math.sin(W.getRadius(90-i)),l=o/Math.abs(u)/2,c=Math.sqrt(Math.pow(l,2)-Math.pow(r,2));W.setCss3(E,"perspective",2*J+"px"),W.setCss3(E,"user-select","none"),t="position: relative; ",t+="width: 100%; ",t+="height: 100%; ",_.style.cssText=t,W.setCss3(_,"transform-style","preserve-3d"),W.setCss3(_,"backface-visibility","hidden"),W.setListTransition(0,0);var h=-R;for(n=0,e=I;e>n;n++)t="position: absolute; ",t+="width: 100%; ",t+="height: 100%; ",b[n].style.cssText=t,W.setCss3(b[n],"transform","rotateY("+h+"deg) translateZ("+c+"px)"),h+=j;s(),"function"==typeof x.create&&x.create(a())}function o(){var t=b.length;for(window.removeEventListener("load",n,!1),E.removeEventListener("touchstart",V.setStart),E.removeEventListener("touchmove",V.setMove),E.removeEventListener("touchend",V.setEnd),E.removeEventListener("touchcancel",V.setEnd),_.removeEventListener(z.transitionsendJs,w,!1);--t>-1;)b[t].removeEventListener("focus",r,!1),b[t].removeEventListener("blur",s,!1)}function s(){N&&null===C&&(C=setInterval(v,x.slideShowTime))}function r(){clearInterval(C),C=null}function i(){J=E.offsetWidth}function a(){return O}function u(t){O=t}function l(){return Y}function c(t){Y=t}function h(){var t=a();return--t<0&&(t=x.loop?I-1:-1),t}function f(){var t=a();return++t>I-1&&(t=x.loop?0:-1),t}function d(){p(h(),"prev")}function v(){p(f(),"next")}function p(t,e){var n=a(),o=t-n,s=1===arguments.length;return k?!1:t===n?!1:0>t||t>I-1?!1:$&&s&&(t>1||t%2===n%2)?!1:(s?e=o>0?"next":"prev":Math.abs(o)===I-1&&(o=1),$&&s&&t%2===1&&n%2===0&&(e="next"),c(t),m(),void y(o,x.duration,e))}function m(){var t=a();g(),"function"==typeof x.before&&x.before($?t%2:t)}function y(t,e,n){var o=Math.abs(t),s=("next"===n?-1*o:o)*j,r=W.getCss3TransformPos(_);Math.abs(r%j)===Math.abs(B)?r===R?W.setListTransition(e,s,!0):(R=r,w()):(r=Math.abs(r),r-=Math.floor(r/j)*j,e=e*(j-r)/j,W.setListTransition(e,s,!0))}function w(){var t=0;u(l()),t=a(),S(),"function"==typeof x.active&&x.active($?t%2:t)}function g(){k=!0,r()}function S(){k=!1,s()}var x=null,E=null,_=null,b=null,P=null,M=null,T=null,A=null,L=null,C=null,$=!1,N=!1,k=!1,J=0,I=0,j=0,R=0,B=0,O=0,Y=0,z={},D={wrap:null,list:null,pages:null,toStart:null,toStop:null,toPrev:null,toNext:null,startEvents:"click",stopEvents:"click",moveEvents:"click",pageEvents:"click",slideShowTime:3e3,touchMinumRange:10,loop:!0,duration:500,create:null,before:null,active:null},W={extend:function(t,e){var n=null,o={};for(n in t)o[n]=n in e?e[n]:t[n];return o},isArray:function(t){return t?"[object Array]"===Object.prototype.toString.call(t):!1},trim:function(t){return t.replace(/(^\s*)|(\s*$)/gi,"")},dom2Array:function(t){var e=[],n=0,o=0;if(t){if(o=t.length,o>0)for(n=0;o>n;n++)e.push(t[n]);else e.push(t);return e}return null},object2Array:function(t){var e=[];for(var n in t)e.push(t[n]);return e},getRadius:function(t){return t*(Math.PI/180)},getCssPrefix:function(){var t=["-webkit-transition","transition"],e=["-webkit-transform","transform"],n=["webkitTransition","transition"],o=["webkitTransform","transform"],s=["webkitTransitionEnd","transitionend"],r=window.getComputedStyle(document.body,""),i=(W.object2Array(r).join("").match(/-(webkit|moz|ms|o)-/)||""===r.OLink&&["","o"])[1],a="WebKit|Moz|MS|O".match(new RegExp("("+i+")","i"))[1],u="webkit"===i;return{prefixCss:i,prefixJs:a.toLowerCase(),transitionsCss:t[u?0:1],transformsCss:e[u?0:1],transformsJs:o[u?0:1],transitionsJs:n[u?0:1],transitionsendJs:s[u?0:1]}},hasCss3Transition:function(){var t=document.createElement("div"),e=t.style;return z.transitionsJs in e},getCss3TransformPos:function(t){var e=t.style,n="";return n=e[z.transformsJs],n=n.substring(n.lastIndexOf("(")+1,n.lastIndexOf("deg")),parseFloat(n)},setListTransition:function(t,e,n){var o=R;e&&(o+=e),W.setCss3Transition(_,t,o),n&&(R=o)},setCss3Transition:function(t,e,n){W.setCss3(t,"transition",e+"ms"),W.setCss3(t,"transform","scale(0.75) rotateY("+n+"deg)")},setCss3:function(t,e,n){var o,s=t.style;"transition"===e?s[z.transitionsJs]=n:"transform"===e?s[z.transformsJs]=n:(s["-"+z.prefixJs+"-"+e]=n,s[e]=n,o=e.split("-"),o=o.map(function(t,e){return 0===e?t:t.substring(0,1).toUpperCase()+t.substring(1,t.length)}),s[o.join("")]=n)},setBtnEvent:function(t,e,n){for(var o=e.split(","),s=o.length,r=t.length,i="";--s>-1;)for(;--r>-1;)i=W.trim(o[s]),function(e){t[r].addEventListener(i,function(t){n(e),t.preventDefault()})}(r)}},V={is_touch_start:!1,touch_start_x:0,touch_start_y:0,move_dx:0,setInitVaiable:function(){V.is_touch_start=!1,V.touch_start_x=0,V.touch_start_y=0,V.move_dx=0},canPrevMove:function(){return x.loop||-1!==h()?!0:!1},canNextMove:function(){var t=f(),e=($?I-2:I)-1;return!x.loop&&(-1===t||t>e)?!1:!0},setStart:function(t){return V.is_touch_start||k?!1:(g(),void(V.is_touch_start||"touchstart"!==t.type||1!==t.touches.length||(V.is_touch_start=!0,V.touch_start_x=t.touches[0].pageX,V.touch_start_y=t.touches[0].pageY,t.preventDefault())))},setMove:function(t){var e=0,n=0;V.is_touch_start&&"touchmove"===t.type&&1===t.touches.length&&(e=t.touches[0].pageX-V.touch_start_x,n=t.touches[0].pageY-V.touch_start_y,V.move_dx=e/J*100,Math.abs(e)>Math.abs(n)&&(V.move_dx=Math.max(-j,Math.min(j,V.move_dx)),W.setListTransition(0,V.move_dx)),t.preventDefault())},setEnd:function(t){var e=Math.abs(V.move_dx)>x.touchMinumRange,n=V.move_dx<0,o=n?V.canNextMove():V.canPrevMove();V.is_touch_start&&"touchend"===t.type&&(e&&o?(k=!1,n?v():d()):W.setListTransition(x.duration,0)),"touchcancel"===t.type&&(k=!1),V.setInitVaiable()}};return e()?{startSlideShow:s,stopSlideShow:r,refreshSize:i,getIdx:a,toNext:v,toPrev:d,toSlide:p,destory:o}:void 0}!function(t){"use strict";t.fn.swipePoly=function(e){return e.$list=e.$list?e.$list:t(this).find("> ul > li"),e.$wrap=e.$wrap?e.$wrap:t(this).find("> ul"),e.wrap=e.$wrap?e.$wrap.toArray():[],e.list=e.$list?e.$list.toArray():[],e.pages=e.$pages?e.$pages.toArray():[],e.toStart=e.$toStart?e.$toStart.toArray():[],e.toStop=e.$toStop?e.$toStop.toArray():[],e.toPrev=e.$toPrev?e.$toPrev.toArray():[],e.toNext=e.$toNext?e.$toNext.toArray():[],this.each(function(){t(this).data("swipePoly",new SwipePoly(e))})},t.fn.swipePoly2start=function(){return this.each(function(){t(this).data("swipePoly").startSlideShow()})},t.fn.swipePoly2stop=function(){return this.each(function(){t(this).data("swipePoly").stopSlideShow()})},t.fn.swipePoly2prev=function(){return this.each(function(){t(this).data("swipePoly").toPrev()})},t.fn.swipePoly2next=function(){return this.each(function(){t(this).data("swipePoly").toNext()})},t.fn.swipePoly2slide=function(e){return this.each(function(){t(this).data("swipePoly").toSlide(e)})},t.fn.swipePoly2destory=function(){return this.each(function(){t(this).data("swipePoly").destory()})}}(jQuery);